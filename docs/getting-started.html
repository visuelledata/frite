<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="By Christopher Peralta" />


<title>Getting started with frite</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Getting started with frite</h1>
<h4 class="author"><em>By Christopher Peralta</em></h4>
<h4 class="date"><em>Last updated: 2018-07-03</em></h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p><strong>frite</strong> is a package that enables us to easily write and modify functions. It can be used to inject, assign, or remove code in a function. There are also functions that enable you to use this package more easily. You can use the diagnostic functions to test any function that you can think of. It also has applications in code generation or metaprogramming.</p>
</div>
<div id="the-functions" class="section level2">
<h2>The functions</h2>
<ul>
<li>Diagnostic <br>
<ul>
<li><code>tictocify</code> <em>returns a nearly identical timed version of its input</em> <br></li>
<li><code>is.output.same</code> <em>performs call on multiple functions and sees if they match</em></li>
</ul></li>
<li>Modification <br>
<ul>
<li><code>line_assign</code> <em>inserts <code>assign()</code> into a function</em> <br></li>
<li><code>line_insert</code> <em>inserts code into a function</em> <br></li>
<li><code>line_remove</code> <em>removes code from a function</em> <br></li>
<li><code>copy_args</code> <em>copies the arguments of one function to another</em></li>
</ul></li>
<li>Helping <br>
<ul>
<li><code>list_body</code> <em>converts function body to a list</em> <br></li>
<li><code>plot_body</code> <em>plots <code>list_body()</code> so you can inspect the body</em></li>
</ul></li>
</ul>
</div>
<div id="diagnostic-functions" class="section level2">
<h2>Diagnostic functions</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Defining a new function</span>
reduce_timed &lt;-<span class="st"> </span><span class="kw">tictocify</span>(reduce)

<span class="co"># Now to test it against the original reduce</span>
<span class="kw">reduce_timed</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100000</span>, sum, <span class="dt">.init =</span> <span class="dv">0</span>) 
<span class="co">#&gt; 0.28 sec elapsed</span>
<span class="co">#&gt; [1] 5000050000</span>

<span class="kw">is.output.same</span>(<span class="kw">reduce_timed</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100000</span>, sum, <span class="dt">.init =</span> <span class="dv">0</span>), reduce)
<span class="co">#&gt; 0.17 sec elapsed</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p><code>tictocify</code> will return a nearly identical timed version of a function. It does this by creating a function call and inserting <code>tic()</code>, <code>toc()</code>, and a return statement around the call.</p>
<p><code>is.output.same</code> evaluates the call in the first argument and replaces the function in the first call and re-evaluates it with a new output and checks that they are identical.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Constructing a different version of reduce_timed</span>
(reduce_timed1 &lt;-<span class="st"> </span><span class="kw">line_insert</span>(reduce, <span class="dt">after_line =</span> <span class="dv">1</span>, <span class="kw">quote</span>(<span class="kw">tic</span>())))
<span class="co">#&gt; function (.x, .f, ..., .init) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     tic()</span>
<span class="co">#&gt;     reduce_impl(.x, .f, ..., .init = .init, .left = TRUE)</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: namespace:purrr&gt;</span>

(reduce_timed1 &lt;-<span class="st"> </span><span class="kw">line_assign</span>(reduce_timed1, <span class="dt">line =</span> <span class="dv">3</span>, <span class="st">'value'</span>))
<span class="co">#&gt; function (.x, .f, ..., .init) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     tic()</span>
<span class="co">#&gt;     assign(&quot;value&quot;, reduce_impl(.x, .f, ..., .init = .init, .left = TRUE))</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: namespace:purrr&gt;</span>

(reduce_timed1 &lt;-<span class="st"> </span><span class="kw">line_insert</span>(reduce_timed1, <span class="dt">after_line =</span> <span class="dv">3</span>, <span class="kw">quote</span>(<span class="kw">toc</span>())))
<span class="co">#&gt; function (.x, .f, ..., .init) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     tic()</span>
<span class="co">#&gt;     assign(&quot;value&quot;, reduce_impl(.x, .f, ..., .init = .init, .left = TRUE))</span>
<span class="co">#&gt;     toc()</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: namespace:purrr&gt;</span>

(reduce_timed1 &lt;-<span class="st"> </span><span class="kw">line_insert</span>(reduce_timed1, <span class="dt">after_line =</span> <span class="dv">4</span>,
                              <span class="kw">quote</span>(<span class="kw">return</span>(value))))
<span class="co">#&gt; function (.x, .f, ..., .init) </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     tic()</span>
<span class="co">#&gt;     assign(&quot;value&quot;, reduce_impl(.x, .f, ..., .init = .init, .left = TRUE))</span>
<span class="co">#&gt;     toc()</span>
<span class="co">#&gt;     return(value)</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; &lt;environment: namespace:purrr&gt;</span>

<span class="kw">is.output.same</span>(<span class="kw">reduce_timed</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100000</span>, sum, <span class="dt">.init =</span> <span class="dv">0</span>), reduce_timed1)
<span class="co">#&gt; 0.21 sec elapsed</span>
<span class="co">#&gt; 0.16 sec elapsed</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>Note: Everything above can be piped.</p>
<p>These types of modifications can be difficult to make sequentially, so there are a couple of helper functions to allow you to see what you’re doing.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot_body</span>(map)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<pre><code>#&gt; function (.x, .f, ...) 
#&gt; {
#&gt;     .f &lt;- as_mapper(.f, ...)
#&gt;     .Call(map_impl, environment(), &quot;.x&quot;, &quot;.f&quot;, &quot;list&quot;)
#&gt; }
#&gt; &lt;bytecode: 0x0000000003237d08&gt;
#&gt; &lt;environment: namespace:purrr&gt;


map_hello &lt;- map %&gt;% 
  line_insert(after_line = 1, quote(print(&quot;Hello!&quot;)))

list_body(map_hello)
#&gt; [[1]]
#&gt; `{`
#&gt; 
#&gt; [[2]]
#&gt; print(&quot;Hello!&quot;)
#&gt; 
#&gt; [[3]]
#&gt; .f &lt;- as_mapper(.f, ...)
#&gt; 
#&gt; [[4]]
#&gt; .Call(map_impl, environment(), &quot;.x&quot;, &quot;.f&quot;, &quot;list&quot;)

map_hello(list(1, 2, &quot;b&quot;), assertthat::is.number)
#&gt; [1] &quot;Hello!&quot;
#&gt; [[1]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[2]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[3]]
#&gt; [1] FALSE</code></pre>
</div>
<div id="recursively-building-functions" class="section level2">
<h2>Recursively building functions</h2>
<p>You can use the modification functions to build functions with recursion. A simple example is below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">spammer &lt;-<span class="st"> </span><span class="cf">function</span>() {}

add_print &lt;-<span class="st"> </span><span class="cf">function</span>(.f, n) {
  
  .f &lt;-<span class="st"> </span><span class="kw">line_insert</span>(.f, <span class="dv">1</span>, <span class="kw">quote</span>(<span class="kw">print</span>(<span class="st">&quot;a&quot;</span>)))
  
  n &lt;-<span class="st"> </span>n <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
  
  <span class="cf">if</span> (n <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">return</span>(<span class="kw">add_print</span>(.f, n))
  <span class="cf">if</span> (n <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) <span class="kw">return</span>(.f)
}

<span class="kw">add_print</span>(spammer, <span class="dv">5</span>)
<span class="co">#&gt; function () </span>
<span class="co">#&gt; {</span>
<span class="co">#&gt;     print(&quot;a&quot;)</span>
<span class="co">#&gt;     print(&quot;a&quot;)</span>
<span class="co">#&gt;     print(&quot;a&quot;)</span>
<span class="co">#&gt;     print(&quot;a&quot;)</span>
<span class="co">#&gt;     print(&quot;a&quot;)</span>
<span class="co">#&gt; }</span></code></pre></div>
<p>If you want to learn more, you can view the reference manual or install <code>frite</code> and begin experimenting. <br> <br> <br></p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
